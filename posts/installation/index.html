<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2024-09-01">

<title>UCLA PIC 16B Lec 2, Fall 2024 - Software Installation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">UCLA PIC 16B Lec 2, Fall 2024</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/PIC16B-ucla" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Software Installation</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">Week 0</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">September 1, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#install-and-configure-anaconda" id="toc-install-and-configure-anaconda" class="nav-link active" data-scroll-target="#install-and-configure-anaconda">1. Install and Configure Anaconda</a>
  <ul class="collapse">
  <li><a href="#a.-install-anaconda" id="toc-a.-install-anaconda" class="nav-link" data-scroll-target="#a.-install-anaconda">a. Install Anaconda</a></li>
  <li><a href="#b.-create-the-pic16b-24f-anaconda-environment" id="toc-b.-create-the-pic16b-24f-anaconda-environment" class="nav-link" data-scroll-target="#b.-create-the-pic16b-24f-anaconda-environment">b. Create the <code>PIC16B-24F</code> Anaconda Environment</a></li>
  <li><a href="#d.-launch-jupyterlab" id="toc-d.-launch-jupyterlab" class="nav-link" data-scroll-target="#d.-launch-jupyterlab">d.&nbsp;Launch JupyterLab</a></li>
  <li><a href="#e.-verify" id="toc-e.-verify" class="nav-link" data-scroll-target="#e.-verify">e. Verify</a></li>
  <li><a href="#f.-creating-a-new-environment-on-anaconda-optional" id="toc-f.-creating-a-new-environment-on-anaconda-optional" class="nav-link" data-scroll-target="#f.-creating-a-new-environment-on-anaconda-optional">f.&nbsp;Creating a new environment on Anaconda (optional)</a></li>
  </ul></li>
  <li><a href="#github-and-github-desktop" id="toc-github-and-github-desktop" class="nav-link" data-scroll-target="#github-and-github-desktop">2. GitHub and GitHub Desktop</a></li>
  <li><a href="#pick-your-favorite-text-editor" id="toc-pick-your-favorite-text-editor" class="nav-link" data-scroll-target="#pick-your-favorite-text-editor">3. Pick Your Favorite Text Editor</a></li>
  <li><a href="#install-quarto" id="toc-install-quarto" class="nav-link" data-scroll-target="#install-quarto">4. Install Quarto</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>The purpose of this page is to get you set up with the software tools we’ll use in PIC 16B, including Anaconda, git + GitHub, and Quarto.</p>
<section id="install-and-configure-anaconda" class="level2">
<h2 class="anchored" data-anchor-id="install-and-configure-anaconda">1. Install and Configure Anaconda</h2>
<p>An important part of PIC16B is navigating the Python package ecosystem.</p>
<p><img src="python_environment_2x.png" class="img-fluid" alt="https://xkcd.com/1987/"> <em>https://xkcd.com/1987/</em></p>
<p>We will do so using the Anaconda distribution of Python. Getting set up with Anaconda is a somewhat detailed process, outlined below.</p>
<p><strong>You should follow these instructions even if you already have Anaconda installed</strong>. <a href="https://docs.anaconda.com/anaconda/install/uninstall/">Uninstalling</a> and reinstalling is recommended.</p>
<section id="a.-install-anaconda" class="level3">
<h3 class="anchored" data-anchor-id="a.-install-anaconda">a. Install Anaconda</h3>
<p>You can find installers for Anaconda <a href="https://docs.anaconda.com/anaconda/install/">here</a>. Choose the one appropriate to your operating system.</p>
<p>If installing on macOS, <strong>do not install Anaconda in the root-level opt directory</strong>. It is recommended that you install in the folder directly under your username. This is the same folder in which your “Downloads” folder exists. In some cases, Anaconda may suggest installing in a folder called opt under your username; this is fine.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="installation-directory.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">A screencap of the Anaconda graphical installer. The prompt states ‘You have chosen to install this software in the folder philchodrow on the disk Macintosh HD’</figcaption>
</figure>
</div>
<p><em>Example of installing Anaconda to the directory corresponding to your username.</em></p>
</section>
<section id="b.-create-the-pic16b-24f-anaconda-environment" class="level3">
<h3 class="anchored" data-anchor-id="b.-create-the-pic16b-24f-anaconda-environment">b. Create the <code>PIC16B-24F</code> Anaconda Environment</h3>
<p>We will create <code>PIC16B-24F</code> anaconda environment with specific package versions. They are listed in a <code>.yml</code> file, depending on OS. We will fix the versions of the following python and other packages throughout the quarter:</p>
<ul>
<li>python=3.11.6</li>
<li>nb_conda=2.2.1</li>
<li>nb_conda_kernels=2.3.1</li>
<li>pandas=2.0.3</li>
<li>matplotlib=3.7.2</li>
<li>scikit-learn=1.3.0</li>
<li>seaborn=0.12.2</li>
<li>plotly=5.18.0</li>
<li>scrapy=2.8.0</li>
<li>twisted=22.10.0</li>
<li>flask=3.0.0</li>
<li>jinja2=3.1.2</li>
<li>jupyter_client=7.4.9</li>
<li>jupyter_core=5.3.0</li>
<li>jupyter_server=1.23.4</li>
<li>jupyterlab=3.6.3</li>
<li>notebook=6.5.4</li>
</ul>
<p>Download <code>PIC16B-24F-&lt;os&gt;.yml</code> file corresponding to your OS and run the following from the Anaconda Prompt from the directory where the file is located:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> env create <span class="at">-f</span> PIC16B-24F-<span class="op">&lt;</span>os<span class="op">&gt;</span>.yml</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This will create a new environment PIC16B-24F, and I will use that environment in the lectures. Full environment for each OS:</p>
<ul>
<li><a href="https://raw.githubusercontent.com/PIC16B-ucla/24F/main/posts/installation/PIC16B-24F-windows.yml">Windows</a> <strong>UPDATED 10/2</strong></li>
<li><a href="https://raw.githubusercontent.com/PIC16B-ucla/24F/main/posts/installation/PIC16B-24F-mac-silicon.yml">Mac M1/M2</a></li>
<li><a href="https://raw.githubusercontent.com/PIC16B-ucla/24F/main/posts/installation/PIC16B-24F-linux.yml">Linux</a></li>
<li><a href="https://raw.githubusercontent.com/PIC16B-ucla/24F/main/posts/installation/PIC16B-24F-generic.yml">Generic</a> – e.g., Mac with Intel chip (sorry, I no longer own one). You may want to change conda’s environment solver to <a href="https://www.anaconda.com/blog/a-faster-conda-for-a-growing-community">mamba</a> for faster installation.</li>
</ul>
<p>Note that an autograder will be in use for this course, set up on Ubuntu Linux.</p>
<section id="installing-additional-packages" class="level4">
<h4 class="anchored" data-anchor-id="installing-additional-packages">Installing additional packages</h4>
<p>We will mainly be using the <code>PIC16B-24F</code> environment throughout the course – changing package versions unless prompted is discouraged. In the future, if you ever attempt to import a package and encounter an error, you may attempt to install it via the Environments tab on Anaconda Navigator. Click on Channels button and add “conda-forge” channel. Then, search for the package you need on the right-hand side (you may need to update the index).</p>
<p>Check the box beside this package, and then click “Apply” to install.</p>
<p>In this course, we’ll primarily demonstrate deep learning libraries (e.g., Keras, TensorFlow, and PyTorch) using Google Colab, which has some significant benefits related to speed of computation. However, you can also try to install these packages via the package manager.</p>
<p>Note: If you want to use command lines to install Python packages in the future, try to follow prompts that look like</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>conda activate PIC16B<span class="op">-</span><span class="dv">24</span><span class="er">F</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>conda install <span class="op">--</span>channel<span class="op">=</span>conda<span class="op">-</span>forge <span class="op">&lt;</span>package name<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>rather than the ones that start with pip install. If this sentence didn’t make sense to you, you can ignore it and stick to using Anaconda navigator.</p>
</section>
</section>
<section id="d.-launch-jupyterlab" class="level3">
<h3 class="anchored" data-anchor-id="d.-launch-jupyterlab">d.&nbsp;Launch JupyterLab</h3>
<p>Now launch Anaconda Navigator and open the “Home” tab. Launch JupyterLab. Select the environment <code>PIC16B-24F</code>.</p>
<p><img src="select_environ_nav.png" class="img-fluid"> <em>Selecting the PIC16B-24F environment on Anaconda Navigator</em></p>
<p>Create a new Jupyter notebook. Change the kernel to the <code>PIC16B-24F</code> environment that you created in Step 1b.</p>
<p><img src="select_environ_lab.png" class="img-fluid"> <em>Selecting the PIC16B-24F environment from within a Jupyter notebook.</em></p>
</section>
<section id="e.-verify" class="level3">
<h3 class="anchored" data-anchor-id="e.-verify">e. Verify</h3>
<p>Type the two lines below into your blank Jupyter Notebook and run them, adding in your name. If you do not encounter an error, then your setup was successful. Otherwise, contact the instructor or TA for help.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"My name is [your name] and I installed Anaconda"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="f.-creating-a-new-environment-on-anaconda-optional" class="level3">
<h3 class="anchored" data-anchor-id="f.-creating-a-new-environment-on-anaconda-optional">f.&nbsp;Creating a new environment on Anaconda (optional)</h3>
<p>Sometimes, especially for the term project, you may want to use an environment other than what we have set up for the lectures. You can follow the step below to create a “fresh” environment.</p>
<ol type="1">
<li>Open Anaconda Navigator.</li>
<li>Navigate to the Environments tab.</li>
<li>Choose “Create.”</li>
<li>Create a Python 3.11 environment named “PIC16B-project”.</li>
</ol>
</section>
</section>
<section id="github-and-github-desktop" class="level2">
<h2 class="anchored" data-anchor-id="github-and-github-desktop">2. GitHub and GitHub Desktop</h2>
<p>If you don’t have a GitHub account yet, create one on <a href="https://education.github.com/pack">GitHub</a>. You get a lot of free stuff as a student.</p>
<p>Also download <a href="https://desktop.github.com/">GitHub Desktop</a>, a graphical client for working with <code>git</code>. If you do not use GitHub Desktop (or another graphical client), you will need to work with <code>git</code> from the command line.</p>
<p>Connect your GitHub Desktop app to your GitHub account.</p>
</section>
<section id="pick-your-favorite-text-editor" class="level2">
<h2 class="anchored" data-anchor-id="pick-your-favorite-text-editor">3. Pick Your Favorite Text Editor</h2>
<p>Text editors allow you to make modifications to plaintext files. They are useful for coding, writing, and any other tasks that require the manipulation of plaintext.</p>
<p>I like to use JupyterLab or <a href="https://code.visualstudio.com/">Visual Studio Code</a>. For some reason, my VS code had trouble with Quarto, so I’m going to use JupyterLab. I sometimes use <a href="https://posit.co/download/rstudio-desktop/">RStudio</a> for my Quarto editor, but that’s another story.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<p><a href="https://www.sublimetext.com/">Sublime Text</a> and <a href="https://atom.io/">Atom</a> are also popular. Some people also use Notepad++ but that might not be the best option for beginners. Beyond this course, if you expect to write a significant amount of code in your career then it is worthwhile to find a text editor that you like.</p>
<p>Once you’ve installed a text editor that you like, try opening it up and modifying a text file.</p>
<p>Next, try writing a simple Python file and running it from your editor. To do this, first paste the following into a file called <code>my_script.py</code>:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"I can run Python scripts from my text editor!"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Then, open a terminal window from your editor. In the terminal, write <code>python3 my_script.py</code> and hit enter. You’ll need to ensure that your terminal is in the same location as the file <code>my_script.py</code>.</p>
</section>
<section id="install-quarto" class="level2">
<h2 class="anchored" data-anchor-id="install-quarto">4. Install Quarto</h2>
<p>In this course, we’ll use Quarto to create a simple, attractive website on which to host our homework and project submissions.</p>
<p>Follow the instructions here: https://quarto.org/docs/get-started/Links</p>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>In fact, Quarto is created by people in Posit, previously RStudio.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>