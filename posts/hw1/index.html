<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2024-10-07">

<title>UCLA PIC 16B Lec 2, Fall 2024 - Homework 1: Data Wrangling and Visualization</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">UCLA PIC 16B Lec 2, Fall 2024</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/PIC16B-ucla" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Homework 1: Data Wrangling and Visualization</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">Homework</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">October 7, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#instructions" id="toc-instructions" class="nav-link active" data-scroll-target="#instructions">Instructions</a></li>
  <li><a href="#create-a-database" id="toc-create-a-database" class="nav-link" data-scroll-target="#create-a-database">1. Create a Database</a></li>
  <li><a href="#write-a-query-function" id="toc-write-a-query-function" class="nav-link" data-scroll-target="#write-a-query-function">2. Write a Query Function</a></li>
  <li><a href="#write-a-geographic-scatter-function-for-yearly-temperature-increases" id="toc-write-a-geographic-scatter-function-for-yearly-temperature-increases" class="nav-link" data-scroll-target="#write-a-geographic-scatter-function-for-yearly-temperature-increases">3. Write a Geographic Scatter Function for Yearly Temperature Increases</a></li>
  <li><a href="#create-two-more-interesting-figures" id="toc-create-two-more-interesting-figures" class="nav-link" data-scroll-target="#create-two-more-interesting-figures">4. Create Two More Interesting Figures</a></li>
  <li><a href="#tip" id="toc-tip" class="nav-link" data-scroll-target="#tip">Tip</a></li>
  <li><a href="#submission" id="toc-submission" class="nav-link" data-scroll-target="#submission">Submission</a></li>
  <li><a href="#specifications" id="toc-specifications" class="nav-link" data-scroll-target="#specifications">Specifications</a>
  <ul class="collapse">
  <li><a href="#format" id="toc-format" class="nav-link" data-scroll-target="#format">Format</a></li>
  <li><a href="#coding-problem" id="toc-coding-problem" class="nav-link" data-scroll-target="#coding-problem">Coding Problem</a></li>
  <li><a href="#style-and-documentation" id="toc-style-and-documentation" class="nav-link" data-scroll-target="#style-and-documentation">Style and Documentation</a></li>
  <li><a href="#writing" id="toc-writing" class="nav-link" data-scroll-target="#writing">Writing</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>In this blog post, you’ll create several interesting, interactive data graphics using the NOAA climate data that we’ve explored in the first several weeks of lectures.</p>
<section id="instructions" class="level2">
<h2 class="anchored" data-anchor-id="instructions">Instructions</h2>
<p>Your post should include not only code but also <strong>outputs</strong> (i.e.&nbsp;tables, figures) and <strong>expository writing</strong> that explains what you’re doing. Your target audience is a a student who has completed PIC16A but hasn’t taken PIC16B yet (i.e.&nbsp;you before the start of the quarter).</p>
<p>See the “Specifications” section at the bottom for a detailed list of specs.</p>
</section>
<section id="create-a-database" class="level2">
<h2 class="anchored" data-anchor-id="create-a-database">1. Create a Database</h2>
<p>First, create a database with three tables: <code>temperatures</code>, <code>stations</code>, and <code>countries</code>. Refer back to lecture notes on how to access country names and relate them to temperature readings. Keep these as three separate tables in your database. Please refrain from changing column names. For countries, create a table from <a href="https://raw.githubusercontent.com/mysociety/gaze/master/data/fips-10-4-to-iso-country-codes.csv">this CSV file</a> used in the lecture.</p>
<p><strong>Let’s remove any rows with temperature measures of <code>NaN</code> when preparing the database.</strong> Make sure to close the database connection after you are finished constructing it.</p>
</section>
<section id="write-a-query-function" class="level2">
<h2 class="anchored" data-anchor-id="write-a-query-function">2. Write a Query Function</h2>
<p>In the <code>climate_database.py</code> file, write a function called <code>query_climate_database()</code> which accepts <em>five</em> arguments:</p>
<ul>
<li><code>db_file</code>, the file name for the database</li>
<li><code>country</code>, a string giving the name of a country for which data should be returned.</li>
<li><code>year_begin</code> and <code>year_end</code>, two integers giving the earliest and latest years for which should be returned (inclusive).</li>
<li><code>month</code>, an integer giving the month of the year for which should be returned.</li>
</ul>
<p>The return value of <code>query_climate_database()</code> is a Pandas dataframe of temperature readings for the specified country, in the specified date range, in the specified month of the year. This dataframe should have the following columns, in this order:</p>
<ul>
<li><code>NAME</code>: The station name.</li>
<li><code>LATITUDE</code>: The latitude of the station.</li>
<li><code>LONGITUDE</code>: The longitude of the station.</li>
<li><code>Country</code>: The name of the country in which the station is located.</li>
<li><code>Year</code>: The year in which the reading was taken.</li>
<li><code>Month</code>: The month in which the reading was taken.</li>
<li><code>Temp</code>: The average temperature at the specified station during the specified year and month. (<em>Note: the temperatures in the raw data are already averages by month, so you don’t have to do any aggregation at this stage.</em>)</li>
</ul>
<p><strong>Hint</strong>: Inside the function, you would want to put in the given variables (like <code>year_begin</code>) inside the query string (like <code>SELECT ... FROM ... WHERE ...</code>). While you can do this with string concatenation, using the fancy Python <a href="https://realpython.com/python-string-formatting/#3-string-interpolation-f-strings-python-36">f-strings</a> will probably make your life easier. Be careful not to forget quotation marks for the string variables.</p>
<p>You should load the <code>query_climate_database()</code> function and show its content in your blog:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> climate_database <span class="im">import</span> query_climate_database</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> inspect</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(inspect.getsource(query_climate_database))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Run this example and check if you get the correct result:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>query_climate_database(db_file <span class="op">=</span> <span class="st">"your_database_file.db"</span>,</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>                       country <span class="op">=</span> <span class="st">"India"</span>, </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>                       year_begin <span class="op">=</span> <span class="dv">1980</span>, </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>                       year_end <span class="op">=</span> <span class="dv">2020</span>,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>                       month <span class="op">=</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div>


<table class="dataframe table table-sm table-striped small">
<thead>
<tr>
<th>
</th>
<th>
NAME
</th>
<th>
LATITUDE
</th>
<th>
LONGITUDE
</th>
<th>
Country
</th>
<th>
Year
</th>
<th>
Month
</th>
<th>
Temp
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
0
</th>
<td>
AGARTALA
</td>
<td>
23.883
</td>
<td>
91.250
</td>
<td>
India
</td>
<td>
1980
</td>
<td>
1
</td>
<td>
18.21
</td>
</tr>
<tr>
<th>
1
</th>
<td>
AGARTALA
</td>
<td>
23.883
</td>
<td>
91.250
</td>
<td>
India
</td>
<td>
1981
</td>
<td>
1
</td>
<td>
18.25
</td>
</tr>
<tr>
<th>
2
</th>
<td>
AGARTALA
</td>
<td>
23.883
</td>
<td>
91.250
</td>
<td>
India
</td>
<td>
1982
</td>
<td>
1
</td>
<td>
19.31
</td>
</tr>
<tr>
<th>
3
</th>
<td>
AGARTALA
</td>
<td>
23.883
</td>
<td>
91.250
</td>
<td>
India
</td>
<td>
1985
</td>
<td>
1
</td>
<td>
19.25
</td>
</tr>
<tr>
<th>
4
</th>
<td>
AGARTALA
</td>
<td>
23.883
</td>
<td>
91.250
</td>
<td>
India
</td>
<td>
1988
</td>
<td>
1
</td>
<td>
19.54
</td>
</tr>
<tr>
<th>
…
</th>
<td>
…
</td>
<td>
…
</td>
<td>
…
</td>
<td>
…
</td>
<td>
…
</td>
<td>
…
</td>
<td>
…
</td>
</tr>
<tr>
<th>
3115
</th>
<td>
VISHAKHAPATNAM
</td>
<td>
17.717
</td>
<td>
83.233
</td>
<td>
India
</td>
<td>
2016
</td>
<td>
1
</td>
<td>
25.09
</td>
</tr>
<tr>
<th>
3116
</th>
<td>
VISHAKHAPATNAM
</td>
<td>
17.717
</td>
<td>
83.233
</td>
<td>
India
</td>
<td>
2017
</td>
<td>
1
</td>
<td>
23.90
</td>
</tr>
<tr>
<th>
3117
</th>
<td>
VISHAKHAPATNAM
</td>
<td>
17.717
</td>
<td>
83.233
</td>
<td>
India
</td>
<td>
2018
</td>
<td>
1
</td>
<td>
22.65
</td>
</tr>
<tr>
<th>
3118
</th>
<td>
VISHAKHAPATNAM
</td>
<td>
17.717
</td>
<td>
83.233
</td>
<td>
India
</td>
<td>
2019
</td>
<td>
1
</td>
<td>
22.20
</td>
</tr>
<tr>
<th>
3119
</th>
<td>
VISHAKHAPATNAM
</td>
<td>
17.717
</td>
<td>
83.233
</td>
<td>
India
</td>
<td>
2020
</td>
<td>
1
</td>
<td>
23.75
</td>
</tr>
</tbody>

</table>
<p>
3120 rows × 7 columns
</p>
</div>
</section>
<section id="write-a-geographic-scatter-function-for-yearly-temperature-increases" class="level2">
<h2 class="anchored" data-anchor-id="write-a-geographic-scatter-function-for-yearly-temperature-increases">3. Write a Geographic Scatter Function for Yearly Temperature Increases</h2>
<p>In this part, you will write a function to create visualizations that address the following question:</p>
<blockquote class="blockquote">
<p>How does the average yearly change in temperature vary within a given country?</p>
</blockquote>
<p>Write a function called <code>temperature_coefficient_plot()</code>. This function should accept six explicit arguments, and an undetermined number of keyword arguments.</p>
<ul>
<li><code>db_file</code>, <code>country</code>, <code>year_begin</code>, <code>year_end</code>, and <code>month</code> should be as in the previous part.</li>
<li><code>min_obs</code>, the minimum required number of years of data for any given station. Only data for stations with at least <code>min_obs</code> years worth of data in the specified month should be plotted; the others should be filtered out. <code>df.transform()</code> plus filtering is a good way to achieve this task.</li>
<li><code>**kwargs</code>, additional keyword arguments passed to <code>px.scatter_mapbox()</code>. These can be used to control the colormap used, the mapbox style, etc.</li>
</ul>
<p>The output of this function should be an interactive geographic scatterplot, constructed using Plotly Express, with a point for each station, such that the color of the point reflects an estimate of the yearly change in temperature during the specified month and time period at that station. A reasonable way to do this is to compute the first coefficient of a linear regression model at that station, as illustrated in the lecture where we used the <code>.apply()</code> method.</p>
<p>For example, after writing your function, you should be able to create a plot of estimated yearly increases in temperature during the month of January, in the interval 1980-2020, in India, as follows:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># assumes you have imported necessary packages</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>color_map <span class="op">=</span> px.colors.diverging.RdGy_r <span class="co"># choose a colormap</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> temperature_coefficient_plot(<span class="st">"India"</span>, <span class="dv">1980</span>, <span class="dv">2020</span>, <span class="dv">1</span>, </span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>                                   min_obs <span class="op">=</span> <span class="dv">10</span>,</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>                                   zoom <span class="op">=</span> <span class="dv">2</span>,</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>                                   mapbox_style<span class="op">=</span><span class="st">"carto-positron"</span>,</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>                                   color_continuous_scale<span class="op">=</span>color_map)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<iframe scrolling="no" width="100%" height="545px" src="india-HW1-example.html" frameborder="0" allowfullscreen="">
</iframe>
<p>Please pay attention to the following details:</p>
<ul>
<li>The station name is shown when you hover over the corresponding point on the map.</li>
<li>The estimates shown in the hover are rounded to a sober number of significant figures.</li>
<li>The colorbar and overall plot have professional titles.</li>
<li>The colorbar is <strong>centered at 0</strong>, so that the “middle” of the colorbar (white, in this case) corresponds to a coefficient of 0.</li>
</ul>
<p>It’s not necessary for your plot to look exactly like mine, but please attend to details such as these. Feel free to be creative about these labels, as well as the choice of colors, as long as your result is polished overall.</p>
<p>You are free (and indeed encouraged) to define additional functions as needed.</p>
</section>
<section id="create-two-more-interesting-figures" class="level2">
<h2 class="anchored" data-anchor-id="create-two-more-interesting-figures">4. Create Two More Interesting Figures</h2>
<p>Create at least one more SQL query function in <code>climate_database.py</code> and at least two more complex and interesting interactive data visualizations using the same data set. These plots must be of different <em>types</em> (e.g.&nbsp;line and bar, scatter and histogram, etc). The code to construct each visualization should be wrapped in functions, such that a user could create visualizations for different parts of the data by calling these functions with different arguments. At least one of these plots must involve <strong>multiple facets</strong> (i.e.&nbsp;multiple axes (in the sense of facets), each of which shows a subset of the data).</p>
<p>Alongside the plots, you should clearly state a question that the plot addresses, similar to the question that we posed in Part 3. The questions for your two additional plots should be meaningfully different from each other and from the Part 3 question. You will likely want to define different query functions for extracting data for these new visualizations.</p>
<p>It is not necessary to create <em>geographic</em> plots for this part. Scatterplots, histograms, and line plots (among other choices) are all appropriate. Please make sure that they are complex, engaging, professional, and targeted to the questions you posed. In other words, <em>push yourself!</em> Don’t hesitate to ask your peers or talk to me if you’re having trouble coming up with questions or identifying plots that might be suitable for addressing those questions.</p>
</section>
<section id="tip" class="level2">
<h2 class="anchored" data-anchor-id="tip">Tip</h2>
<p>To properly show figures in your blog, the most reliable way is to set your plotly renderer to <code>iframe</code>. To do so, run the following near the top of your notebook:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.io <span class="im">as</span> pio</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>pio.renderers.default<span class="op">=</span><span class="st">"iframe"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This will generate a folder called <code>iframe_figures/</code> inside the folder where your notebook is located. In order to have the figures show up in your blog, you should keep this folder along with the Jupyter Notebook in your post folder.</p>
</section>
<section id="submission" class="level2">
<h2 class="anchored" data-anchor-id="submission">Submission</h2>
<p>There will be <strong>three Gradescope assignments</strong> open for submission, one for <strong>autograder</strong>, one for <strong>PDF</strong>, and the other for <strong>files</strong>. You have to submit <strong>all</strong> of them for your homework to be graded.</p>
<ul>
<li>For <strong>autograder</strong>, please submit the file <code>climate_database.py</code>.</li>
<li>For the <strong>PDF</strong> assingment, please submit your newly-created blog page printed as PDF. Please make sure your code is <strong>visible in full</strong>, i.e., not cuttoff, in your pdf.
<ul>
<li>The PDF file should show the URL to your blog.</li>
</ul></li>
<li>For the <strong>files</strong> assignment, please submit any code file you wrote for your homework. You don’t have to include what you have submitted for autograder. All the <code>.py</code> file, <code>.ipynb</code> file, or <code>.qmd</code> files all included. You don’t have to submit <code>.html</code> or <code>.db</code> files. It should include a <code>.py</code> file converted from any <code>.ipynb</code> file. The grader should be able to reproduce your result from the code portion you submitted.
<ul>
<li>It must include <code>index.ipynb</code>, the Jupyter Notebook you worked on, and <code>index.py</code>, a Python script-converted version of it.</li>
</ul></li>
</ul>
</section>
<section id="specifications" class="level1">
<h1>Specifications</h1>
<p>Please remember that all specifications must be met in order for the blog post to earn credit.</p>
<section id="format" class="level2">
<h2 class="anchored" data-anchor-id="format">Format</h2>
<ol start="0" type="1">
<li>Please follow the “Submission” section above.</li>
</ol>
</section>
<section id="coding-problem" class="level2">
<h2 class="anchored" data-anchor-id="coding-problem">Coding Problem</h2>
<ol type="1">
<li><strong>Autograder</strong>: The <code>query_climate_database()</code> function is correctly defined according to the prompt. The column names of the data frames should match exactly as well.</li>
<li>On the blog post, it is shown that the result for the 1980-2020 India example has 3120 rows with appropriate columns.</li>
<li>There are two geographic scatterplots, one for 1980-2020 India that looks similar to the provided example, and another one for a different time and/or country.</li>
<li>The geographic scatterplots are correctly constructed and professionally labeled, including a title, hovers with rounded estimates, and a correctly centered colorbar.</li>
<li>There is at least one more SQL query function defined.</li>
<li>There are two other interactive plots constructed using Plotly.</li>
<li>One of these plots involves the use of multiple facets.</li>
<li>The two other plots are wrapped in appropriate, user-friendly functions.</li>
<li>Each of the two other interactive plots have descriptive titles and centered color maps when appropriate.</li>
</ol>
<ul>
<li>(EXTRA CREDIT - ONE HW POINT) Compare the runtime of the database queries between <code>sqlite3</code>, <code>duckdb</code>, and <code>polars</code>. Write separate functions <code>query_climate_duckdb()</code> and <code>query_climate_polars()</code> for this purpose.</li>
</ul>
</section>
<section id="style-and-documentation" class="level2">
<h2 class="anchored" data-anchor-id="style-and-documentation">Style and Documentation</h2>
<ol start="10" type="1">
<li>Repeated operations should be enclosed in functions.</li>
<li>For-loops are minimized by making full use of vectorized operations for Numpy arrays and Pandas data frames.</li>
<li>Helpful comments are supplied throughout the code. Docstrings are supplied for any functions and classes you define.
<ul>
<li>Please show the content of the functions you defined in a separate python file using <code>inspect.getsource()</code>.</li>
</ul></li>
</ol>
</section>
<section id="writing" class="level2">
<h2 class="anchored" data-anchor-id="writing">Writing</h2>
<ol start="13" type="1">
<li>The overall post is written in engaging and unambiguous English prose. There is written explanation throughout the post, such that a PIC16A student could learn to perform the demonstrated tasks by reading the post.<br>
</li>
<li>Each block of code has a clearly-explained purpose.</li>
<li>The post is organized into clearly delimited sections using markdown headers (#), making it easier for the reader to navigate.<br>
</li>
<li>The post has a different title from “Blog Post: Data Wrangling and Visualization” or “Blog Post 1”. Please rename it to something more relevant and specific to your data analysis.</li>
</ol>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>